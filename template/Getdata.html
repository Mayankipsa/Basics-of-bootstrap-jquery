<!DOCTYPE html>
<html>

<head>
    <title>Connection with MongoDB DataBase</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        var missing;

        function showdata() {
            var val = ($("#num").val())
                //alert(val);
            var inp = ({
                    "Input": val
                })
                //alert("input")
            var fetchData_airbnb = "https://127.0.0.1:9090/fetchData_airbnb";

            $.get("http://127.0.0.1:9090/getreviewbyid/" + val, function(data, status) {
                alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
                $("#data").text(JSON.stringify(data));
            });


        }

        function creterecord() {
            var new_record = {
                _id: ($("#ID").val()),
                bed_type: ($("#bed_type").val()),
                listing_url: ($("#listing_url").val()),
                name: ($("#name").val()),
                property_type: ($("#property_type").val())
            };
            var newrecord = JSON.stringify(new_record)
            var CreateDataService = "http://127.0.0.1:9090/insert_airbnb";
            $.ajax({
                type: "POST", //rest Type
                dataType: 'json', //mispelled
                data: newrecord,
                url: CreateDataService,
                async: false,
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    alert("success");

                }
            });
            $("#recordAdded").text(JSON.stringify("Record added sucessfully"));



        }

        function updatereview() {

            var update_record = {
                _id: ($("#ID1").val()),
                bed_type: ($("#bed_type1").val()),
                listing_url: ($("#listing_url1").val()),
                property_type: ($("#property_type1").val())
            };
            var updaterecord = JSON.stringify(update_record)
            var UpdateDataService = "http://127.0.0.1:9090/update_airbnb";
            $.ajax({
                type: "POST", //rest Type
                dataType: 'json', //mispelled
                data: updaterecord,
                url: UpdateDataService,
                async: false,
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    alert("success");

                }
            });
            $("#recordupdated").text(JSON.stringify("Record Updated sucessfully"));
        }
    </script>




</head>

<body>
    <div class="text-center">
        <h2>Get Record from Airbnb MongoDB DataBase</h2>
        <div class="text-left">
            <h5>Follow below steps to fetch information from DataBase</h5>
            <ol>
                <li>Enter ID (Like:10006546, 10009999, 1001265)</li>
                <li>Press Submit button</li>
                <li><b>Result:</b> Record will display on sceeen.</li>
            </ol>
            <label for="ID"> <b>Document ID</b></label>
            <input type="number" id="num"><br><br>
            <button type="button" class="btn btn-info" onclick="showdata();">Submit</button>
            <p id="data"> </p>

        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 ">
            <h4>Create a Record</h4>
            <label for="ID"> <b>_ID</b></label>
            <input type="number" id="ID"><br>
            <label for="bed_type"> <b>Bed_type</b></label>
            <input type="text" id="bed_type"><br>
            <label for="listing_url"> <b>Listing_url</b></label>
            <input type="text" id="listing_url"><br>
            <label for="name"> <b>Name   </b></label>
            <input type="text" id="name"><br>
            <label for="property_type"> <b>Property_type</b></label>
            <input type="text" id="property_type"><br>
            <button type="button" class="btn btn-success" onclick="creterecord();">Submit</button>
            <p id="recordAdded"> </p>


        </div>
        <div class="col-sm-6 ">
            <h4>Update Review </h4>
            <label for="ID"> <b>_ID</b></label>
            <input type="number" id="ID1"><br>
            <label for="bed_type"> <b>Bed_type</b></label>
            <input type="text" id="bed_type1"><br>
            <label for="listing_url"> <b>Listing_url</b></label>
            <input type="text" id="listing_url1"><br>
            <button type="button" class="btn btn-success" onclick="updatereview();">Submit</button>
            <p id="recordupdated"> </p>
        </div>
    </div>


</body>

</html>